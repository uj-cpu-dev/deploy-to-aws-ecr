name: Generate Pipeline

on:
  workflow_call:
    outputs:
      language:
        description: "Detected project language"

jobs:
  detect-language:
    name: Detect Language
    runs-on: ubuntu-latest
    outputs:
      language: ${{ steps.detect.outputs.language }}
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v3
        with:
          python-version: 3.9

      - name: Detect Project Type
        id: detect
        run: |
          python scripts/detect_language.py > project_type.txt
          language=$(cat project_type.txt)
          echo "::set-output name=language::$language"
